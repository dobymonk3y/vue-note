# 播放功能

播放功能是使用[H5的Audio标签实现](http://www.w3school.com.cn/tags/tag_audio.asp)


先说下思路：

1. 使用 audio 作为音乐的播放器
2. 在歌曲被点击的时候，改变vuex的全局播放状态，并且在播放状态变更的时候 控制 audio 播放或则暂停
3. 相关的操作包括控制按钮的样式 都依赖 这个全局的播放状态。可以使用计算属性进行返回class样式名称

```html
 <audio ref="audio" :src="currentSong.url"></audio>
```
```javascript
    methods: {
      /* 切换播放状态  */
      togglePlaying () {
          // 更改vuex中的playing值,还要编写控制Audio停止播放的代码，所以在watch中去监听这个播放状态
          this.setPlaying(!this.playing)
        }
      },
      watch: {
        // 当前歌曲变化的时候 播放歌曲
        currentSong () {
          // 在dom没有变化之前调用play会出错，所以使用vue提供的dom更新后调用
          this.$nextTick(() => {
            this.$refs.audio.play()
          })
        },
        playing (staus) {
          // 这里暂时没有发现 有报错，可能和浏览器版本有关吧
          staus ? this.$refs.audio.play() : this.$refs.audio.pause()
        }
      }
    }
```
