# 展开收起动画（JavaScript 钩子）

![](/assets/musicapp/播放器展开收起动画js.png)

前面使用了vue的css类名实现基础的动画效果，这里要做一个更酷炫的效果。
如上图，从迷你播放器进入全屏的时候，迷你播放器中的图片飞入全屏的唱片中(逐渐放大飞入)，或则说更大，然后再缩小到正常状态，和顶部的贝塞尔曲线效果相呼应


先来看一下示意图，到底是怎么个飞？原理如下图

## 飞入原理
![](/assets/musicapp/播放器动画效果-cd从迷你播放器中飞入全屏播放器cd位置原理xy轴.png)

简单一句话：在全屏播放器打开的时候，让cd元素先移动到mini播放器的小cd处，也就是 大圆中心点，移动到小圆中心点

移动的时候是 基于大圆为基准，所以这里是 x轴 往左移动（负数）,y轴往下移动（正数）

那么就要计算出往左移动多少，和往下移动多少。

x轴偏移量 = -（屏幕的宽度/2 - 小圆的半径 - 小圆距离屏幕左边的距离）
y轴的偏移量 = 屏幕的高度 - cd距离顶部高度 - 小圆中心点距离屏幕底部的距离 - 大圆的半径

上面的高度半径什么的，都是以容器的css样式计算的，其他的高度宽度都是 css 写死的，padding值，图片容器宽高等，只有大圆的半径是屏幕宽度的百分之80

所以就计算出来了 x,y轴的偏移量。再加上缩放的比例（小圆占大圆的比例）

在效果上看起来就是从迷你播放器cd上慢慢变大并且飞入到大cd中  